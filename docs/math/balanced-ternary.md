
平衡三进制，也称为对称三进制。这是一个不太标准的**计数体系**。正规的三进制的数字都是由 $0,1,2$ 构成的，而平衡三进制的数字是由 $-1,0,1$ 构成的。它的基数也是 $3$ (因为有三个可能的值)。由于将 $-1$ 写成数字不方便，我们将使用字母 $\text{Z}$ 来代替 $-1$ 。

这里有几个例子:

$$
\begin{array}{ll}
0 & \text{0}\\
1 & \text{1}\\
2 & \text{1Z}\\
3 & \text{10}\\
4 & \text{11}\\
5 & \text{1ZZ}\\
6 & \text{1Z0}\\
7 & \text{1Z1}\\
8 & \text{10Z}\\
9 & \text{100}\\
\end{array}
$$

该**计数体系**的负数表示起来很容易: 只需要将正数的数字倒转即可( $\text{Z}$ 变成 $1$ , $1$ 变成 $\text{Z}$ )。

$$
\begin{array}{ll}
-1 & \text{Z}\\
-2 & \text{Z1}\\
-3 & \text{Z0}\\
-4 & \text{ZZ}\\
-5 & \text{Z11}\\
\end{array}
$$

很容易就可以看到，负数最高位是 $\text{Z}$ ，正数最高位是 $1$ 。

## 转换算法

在平衡三进制的转转换法中，需要先写出一个给定的数 $x$ 在标准三进制中的表示。当 $x$ 是用标准三进制表示时，其数字的每一位都是 $0$ 、$1$ 或 $2$ 。从最低的数字开始迭代，我们可以先跳过任何的 $0$ 和 $1$ ，但是如果遇到 $2$ 就应该先将其变成 $\text{Z}$ ，下一位数字再加上 $1$ 。而遇到数字 $3$ 则应该转换为 $0$ 下一位数字再加上 $1$ 。


### Example 1

把 $64$ 转换成平衡三进制。

首先，我们用标准三进制数来重写这个数:

$$64_{10} = 02101_{3}$$

让我们从对整个数影响最小的数字(最低位)进行处理：

- $101$ 被跳过（因为在平衡三进制中允许 $0$ 和 $1$ ）；
- $2$ 变成了 $\text{Z}$ ，它左边的数字加 $1$ ，得到 $\text{1Z101}$ ；
- $1$ 被跳过，得到 $\text{1Z101}$ 。

最终的结果是 $\text{1Z101}$。

我们再把它转换回十进制:

$$
\text{1Z101} = 81 \cdot 1 + 27 \cdot (-1) + 9 \cdot 1 + 3 \cdot 0 + 1 \cdot 1 = 64_{10}
$$

### Example 2

把 $237$ 转换成平衡三进制。

首先，我们用标准三进制数来重写这个数:

$$237_{10} = 22210_3$$

- $0$ 和 $1$ 被跳过(因为在平衡三进制中允许 $0$ 和 $1$ )；
- $2$ 变成 $\text{Z}$ ，左边的数字加 $1$ ，得到 $\text{23Z10}$ ；
- $3$ 变成 $0$ ，左边的数字加 $1$ ，得到 $\text{30Z10}$ ；
- $3$ 变成 $0$ ，左边的数字(默认是 $0$ )加 $1$ ，得到 $\text{100Z10}$ ；
- $1$ 被跳过，得到 $\text{100Z10}$ 。

最终的结果是 $\text{100Z10}$ 。

我们再把它转换回十进制：

$$
\text{100Z10} = 243 \cdot 1 + 81 \cdot 0 + 27 \cdot 0 + 9 \cdot (-1) + 3 \cdot 1 + 1 \cdot 0 = 237_{10}
$$


## 练习题

[Topcoder SRM 604, Div1-250](https://community.topcoder.com/stat?c=problem_statement&pm=12917&rd=15837)


**本页面部分内容译自博文 [Троичная сбалансированная система счисления](http://e-maxx.ru/algo/balanced_ternary) 与其英文翻译版 [Balanced Ternary](https://cp-algorithms.com/algebra/balanced-ternary.html) 。其中俄文版版权协议为 Public Domain + Leave a Link；英文版版权协议为 CC-BY-SA 4.0。**


